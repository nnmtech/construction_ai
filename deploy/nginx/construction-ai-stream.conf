# Nginx TCP passthrough (port 443) -> Traefik on localhost:9443
#
# Purpose: Nginx owns external :443 but does NOT terminate TLS.
# It forwards raw TCP to Traefik, so Traefik can do:
# - TLS termination
# - ACME (Let's Encrypt)
# - HTTP->HTTPS redirects (via its :80 entrypoint)
#
# Requires nginx built with stream module and nginx.conf to include:
#   stream { include /etc/nginx/stream-enabled/*.conf; }

upstream traefik_tls {
    server 127.0.0.1:9443;
}

server {
    listen 443;
    listen [::]:443;

    proxy_pass traefik_tls;

    # Optional tuning
    proxy_timeout 10m;
    proxy_connect_timeout 5s;
}
